<!doctype html>
<html ng-app="app">
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.0/angular.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ngStorage/0.3.11/ngStorage.min.js"></script>
  <script src="index.js"></script>
</head>
<body>
<div class="container" ng-controller="restProductController">
  <nav class="navbar navbar-expand-lg bg-light">
    <div class="container-fluid">
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item" ng-show="!isUserLoggedIn()">
            <form class="align-middle" ng-submit="tryToAuth()">
              <div class="input-group input-group-sm" style="padding: 4px;">
                <input id="navLoginField" class="form-control" ng-model="user.username" type="text"
                       aria-describedby="inputGroup-sizing-sm">
                <input id="navPasswordField" class="form-control" ng-model="user.password"
                       type="password"
                       aria-describedby="inputGroup-sizing-sm" style="margin-left: 10px;">
                <button id="navLoginSubmit" class="btn btn-outline-warning btn-sm"
                        style="margin-left: 10px;" type="submit">Войти
                </button>
              </div>
            </form>
          </li>
          <li class="nav-item" ng-show="isUserLoggedIn()" style="padding: 4px;">
            <button class="btn btn-outline-secondary btn-sm" ng-click="tryToLogout()">Выйти</button>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  <h3>Filter Products</h3>
  <form novalidate ng-submit="loadProducts()">
    <div class = "form-floating input-group-sm">
      <input class="form-control" id="filterMinPrice" type="number" ng-model="filter.min_price">
      <label for = "filterMinPrice">Min. Price</label>
    </div>
    <p></p>
    <div class = "form-floating input-group-sm">
      <input class="form-control" id="filterMaxPrice" type="number" ng-model="filter.max_price">
      <label for = "filterMaxPrice">Max. Price</label>
    </div>
    <p></p>
    <div class = "form-floating input-group-sm">
      <input class="form-control" id="filterName" type="text" ng-model="filter.name">
      <label for = "filterName">Product Name</label>
    </div>
    <p></p>
    <button type="submit" class="btn btn-primary">Submit</button>
    <button class="btn btn-danger" ng-click="resetFilter()">Reset</button>
  </form>

  <h3>Products List</h3>
  <table class="table table-hover" cellpadding="0" cellspacing="0">
    <tr>
      <td>ID</td>
      <td>Name</td>
      <td>Price</td>
      <td>Delete</td>
      <td>Add To Cart</td>
      <td>New Price</td>
      <td>Change Price</td>
    </tr>
    <tbody>
    <tr ng-repeat="p in ProductsPage.content">
      <td>{{p.id}}</td>
      <td>{{p.name}}</td>
      <td>{{p.price}}</td>
      <td>
        <button class="btn btn-danger" ng-click="deleteProduct(p.id)">Remove</button>
      </td>
      <td>
        <button class="btn btn-danger" ng-click="addToCart(p.id, p.name, p.price)">Add To Cart</button>
      </td>
      <td>
        <input type="number" name="cost" ng-model="price" />
      </td>
      <td>
        <button class="btn btn-primary" ng-click="changePrice(p.id, p.name, price)">Confirm</button>
      </td>
    </tr>
    </tbody>
  </table>
  <ul>
    <button ng-disabled="currentPage == 1" ng-click="changePage(currentPage-1)">Previous</button>
    {{currentPage}}
    <button ng-disabled="ProductsList.length < 10" ng-click="changePage(currentPage+1)">Next</button>
  </ul>
  <br>
  <h3>Add New Random Beer</h3>
  <button class="btn btn-primary"
          ng-click="saveRandom()">Do It!</button>
  <br>
  <br>
  <h3>Cart</h3>
  <table class="table table-hover" cellpadding="0" cellspacing="0">
    <tr>
      <td>ID</td>
      <td>Name</td>
      <td>Price</td>
      <td>Quantity</td>
      <td>Remove</td>
    </tr>
    <tbody>
    <tr ng-repeat="p in CartsPage.content">
      <td>{{p.id}}</td>
      <td>{{p.name}}</td>
      <td>{{p.price}}</td>
      <td>{{p.quantity}}</td>
      <td>
        <button class="btn btn-danger" ng-click="deleteProductFromCart(p.id)">Remove</button>
      </td>
    </tr>
    </tbody>
  </table>
  <br>
  <h3>Add Product</h3>
  <form novalidate ng-submit="addProduct()">
    <input class="form-control" type="text" ng-model="newProduct.name">
    <p></p>
    <input class="form-control" type="number" ng-model="newProduct.price">
    <p></p>
    <button type="submit" class="btn btn-primary">Confirm</button>
  </form>
</div>

</body>
</html>